(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};App.Views.MapView=function(t){function r(){return this.initMap=e(this.initMap,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.tagName="section",r.prototype.id="map",r.prototype.ZOOM=14,r.prototype.tileProvider="osm",r.prototype.initialize=function(){var e;return this.render(),this.$el.height($(document).height()),this.listenTo(App.search,"result:select",this.resultSelected),(e=this.tileProvider)==null&&(this.tileProvider="osm"),this},r.prototype.render=function(){return _.defer(this.initMap)},r.prototype.initMap=function(){var e,t;return this.map=L.map(this.id),e=[18.528984,-72.323686],this.map.setView(e,this.ZOOM),t=L.tileLayer(this.tilesUrlPattern()),this.map.addLayer(t)},r.prototype.resultSelected=function(e){var t;return t=new App.Views.DefaultMarkerView({model:e,map:this.map}),this.map.panTo(t.location())},r.prototype.tilesUrlPattern=function(){switch(this.tileProvider){case"stamen":return"http://tile.stamen.com/toner-lite/{z}/{x}/{y}.png";case"osm":return"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}},r}(Backbone.View)}).call(this);