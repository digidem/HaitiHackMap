(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};App.Views.SearchView=function(t){function r(){return this.selectResult=e(this.selectResult,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.tagName="section",r.prototype.id="search",r.prototype.events={'input [type="search"]':"handleInput","submit form":"preventSubmission"},r.prototype.initialize=function(){return this.collection=new App.Collections.OSMResults,this.listenTo(this.collection,"reset",this.showResults),this.on("result:select",this.selectResult),this.render(),this},r.prototype.render=function(){return this.renderForm(),this.renderResultPane(),this},r.prototype.renderForm=function(){return this.$el.html('<form class="search_form">\n  <input type="search" results=5 autosave="persist_search" placeholder="Search..." />\n  <span class="loader" />\n</form>')},r.prototype.renderResultPane=function(){return this.$osm_results=$('<ul class="osm_results" />'),this.$el.append(this.$osm_results)},r.prototype.handleInput=_.debounce(function(e){var t;return t=this.$(e.target).val(),this.collection.search(t)},500),r.prototype.preventSubmission=function(e){return e.preventDefault(),!1},r.prototype.showResults=function(){return this.emptyResults(),this.$osm_results.html(this.collection.map(function(e){return(new App.Views.OSMResultView({model:e})).el})),this.$osm_results.fadeIn("fast")},r.prototype.selectResult=function(e){return this.emptyResults(),this.$('input[type="search"]').val(e.get("display_name"))},r.prototype.emptyResults=function(){return this.$osm_results.fadeOut("fast"),this.$osm_results.empty()},r}(Backbone.View)}).call(this);